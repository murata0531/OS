     1                                          BOOT_LOAD       equ        0x7C00       ;ブートプログラムのロード位置
     2                                  
     3                                          ORG     BOOT_LOAD                       ;ロードアドレスをアセンブラに指示
     4                                  
     5                                  ;*************************************************************************
     6                                  ;   エントリポイント
     7                                  ;*************************************************************************
     8                                  entry:
     9                                          ;****************************************************
    10                                          ;    BPB(BIOS Parameter Block)
    11                                          ;****************************************************
    12 00000000 EB58                            jmp     ipl
    13 00000002 90<rep 58h>                     times   90 - ($ - $$) db 0x90
    14                                  
    15                                          ;*****************************************************
    16                                          ;   IPL(Initial Program Loader)
    17                                          ;*****************************************************
    18                                  
    19                                  ipl:
    20 0000005A FA                              cli                                     ;割り込み禁止
    21                                  
    22 0000005B B80000                          mov     ax,0x0000                       ;AX = 0x0000;
    23 0000005E 8ED8                            mov     ds,aX                           ;DS = 0x0000;
    24 00000060 8EC0                            mov     es,ax                           ;ES = 0x0000;
    25 00000062 8ED0                            mov     ss,aX                           ;SS = 0x0000;
    26 00000064 BC007C                          mov     sp,BOOT_LOAD                    ;SP = 0x7C00;
    27                                  
    28 00000067 FB                              sti                                     ;割り込み許可
    29                                  
    30 00000068 8816[7800]                      mov     [BOOT.DRIVE],dl                ;ブートドライブを保存
    31                                  
    32 0000006C B041                            mov     al,'A'                          ;AL = 出力文字列
    33 0000006E B40E                            mov     ah,0x0E                         ;テレタイプ式i文字出力
    34 00000070 BB0000                          mov     bx,0x0000                       ;ページ番号と文字色を0に設定
    35 00000073 CD10                            int     0x10                            ;ビデオBIOSコール
    36                                          
    37                                          ;***************************************
    38                                          ;   処理の終了
    39                                          ;***************************************
    40 00000075 EBFE                            jmp     $                               ;無限ループ
    41                                  
    42 00000077 00                      ALIGN 2,db 0
    43                                  
    44                                  BOOT:                                           ;ブートドライブの情報
    45 00000078 0000                    .DRIVE:         dw 0                            ;ドライブ番号
    46                                  
    47                                  ;********************************************************************
    48                                  ;    ブートドライブ(先頭512バイトの終了)
    49                                  ;********************************************************************
    50 0000007A 00<rep 184h>                    times  510 - ($ - $$) db 0x00
    51 000001FE 55AA                            db  0x55,0xAA
